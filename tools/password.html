<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .container {
            background: #232323;
            border-radius: 16px;
            padding: 2rem;
            width: 100%;
            max-width: 480px;
        }
        h2 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #ccc;
        }
        .tabs {
            display: flex;
            background: #2a2a2a;
            border-radius: 10px;
            padding: 4px;
            margin-bottom: 1.75rem;
        }
        .tab {
            flex: 1;
            padding: 0.6rem 0.75rem;
            border: none;
            background: none;
            color: #888;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .tab.active {
            background: #4a8cff;
            color: #fff;
        }
        .tab:not(.active):hover {
            color: #bbb;
        }
        .tab-icon {
            font-size: 0.8rem;
        }
        .section-divider {
            height: 1px;
            background: #333;
            margin: 1rem 0;
        }
        .options-panel {
            display: none;
        }
        .options-panel.active {
            display: block;
        }
        .option-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        .option-row.slider-row {
            gap: 1rem;
        }
        .option-label {
            font-size: 0.9rem;
            color: #aaa;
            min-width: 80px;
        }
        .slider-wrap {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            flex: 1;
            height: 4px;
            background: #444;
            border-radius: 2px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #555;
        }
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #555;
        }
        .length-input {
            width: 52px;
            padding: 6px 8px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            color: #fff;
            font-size: 0.9rem;
            text-align: center;
            outline: none;
        }
        .length-input:focus {
            border-color: #4a8cff;
        }
        .toggles-row {
            display: flex;
            gap: 1.5rem;
        }
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .toggle-label {
            font-size: 0.9rem;
            color: #aaa;
        }
        .toggle {
            position: relative;
            width: 44px;
            height: 24px;
            cursor: pointer;
        }
        .toggle input {
            display: none;
        }
        .toggle-track {
            position: absolute;
            inset: 0;
            background: #444;
            border-radius: 12px;
            transition: background 0.2s;
        }
        .toggle input:checked + .toggle-track {
            background: #4a8cff;
        }
        .toggle-knob {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.2s;
            pointer-events: none;
        }
        .toggle input:checked ~ .toggle-knob {
            transform: translateX(20px);
        }
        .password-display {
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 1.25rem;
            text-align: center;
            font-size: 1.25rem;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            letter-spacing: 0.5px;
            word-break: break-all;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            line-height: 1.6;
        }
        .char-letter { color: #fff; }
        .char-number { color: #4a8cff; }
        .char-symbol { color: #f0a050; }
        .char-word { color: #fff; }
        .char-separator { color: #666; }
        .buttons {
            display: flex;
            gap: 12px;
        }
        .btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s;
            border: 2px solid #4a8cff;
        }
        .btn-primary {
            background: #4a8cff;
            color: #fff;
        }
        .btn-primary:hover {
            background: #3a7aee;
        }
        .btn-outline {
            background: transparent;
            color: #4a8cff;
        }
        .btn-outline:hover {
            background: rgba(74, 140, 255, 0.1);
        }
        .btn.copied {
            background: #3a9a5c;
            border-color: #3a9a5c;
            color: #fff;
        }
        .memorable-options .option-row {
            flex-wrap: wrap;
        }
        .select-wrap select {
            padding: 6px 10px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            color: #fff;
            font-size: 0.9rem;
            outline: none;
            cursor: pointer;
        }
        .select-wrap select:focus {
            border-color: #4a8cff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Choose password type</h2>
        <div class="tabs">
            <button class="tab active" data-type="random">
                <span class="tab-icon">&#x2728;</span> Random
            </button>
            <button class="tab" data-type="memorable">
                <span class="tab-icon">&#x1F4A1;</span> Memorable
            </button>
            <button class="tab" data-type="pin">
                <span class="tab-icon">#</span> PIN
            </button>
        </div>

        <h2>Customize your new password</h2>
        <div class="section-divider"></div>

        <div id="options-random" class="options-panel active">
            <div class="option-row slider-row">
                <span class="option-label">Characters</span>
                <div class="slider-wrap">
                    <input type="range" id="random-length" min="4" max="64" value="20">
                    <input type="number" class="length-input" id="random-length-num" min="4" max="64" value="20">
                </div>
            </div>
            <div class="option-row toggles-row">
                <div class="toggle-group">
                    <span class="toggle-label">Numbers</span>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-numbers" checked>
                        <div class="toggle-track"></div>
                        <div class="toggle-knob"></div>
                    </label>
                </div>
                <div class="toggle-group">
                    <span class="toggle-label">Symbols</span>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-symbols">
                        <div class="toggle-track"></div>
                        <div class="toggle-knob"></div>
                    </label>
                </div>
            </div>
        </div>

        <div id="options-memorable" class="options-panel">
            <div class="option-row slider-row">
                <span class="option-label">Words</span>
                <div class="slider-wrap">
                    <input type="range" id="memorable-words" min="2" max="8" value="4">
                    <input type="number" class="length-input" id="memorable-words-num" min="2" max="8" value="4">
                </div>
            </div>
            <div class="option-row">
                <span class="option-label">Separator</span>
                <div class="select-wrap">
                    <select id="memorable-separator">
                        <option value="-">Hyphen (-)</option>
                        <option value=".">Dot (.)</option>
                        <option value="_">Underscore (_)</option>
                        <option value=" ">Space</option>
                    </select>
                </div>
            </div>
            <div class="option-row toggles-row">
                <div class="toggle-group">
                    <span class="toggle-label">Capitalize</span>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-capitalize" checked>
                        <div class="toggle-track"></div>
                        <div class="toggle-knob"></div>
                    </label>
                </div>
                <div class="toggle-group">
                    <span class="toggle-label">Numbers</span>
                    <label class="toggle">
                        <input type="checkbox" id="toggle-memorable-numbers" checked>
                        <div class="toggle-track"></div>
                        <div class="toggle-knob"></div>
                    </label>
                </div>
            </div>
        </div>

        <div id="options-pin" class="options-panel">
            <div class="option-row slider-row">
                <span class="option-label">Digits</span>
                <div class="slider-wrap">
                    <input type="range" id="pin-length" min="3" max="12" value="6">
                    <input type="number" class="length-input" id="pin-length-num" min="3" max="12" value="6">
                </div>
            </div>
        </div>

        <h2 style="margin-top: 1.5rem;">Generated password</h2>
        <div class="section-divider"></div>
        <div class="password-display" id="password-display"></div>

        <div class="buttons">
            <button class="btn btn-primary" id="btn-copy">Copy password</button>
            <button class="btn btn-outline" id="btn-refresh">Refresh password</button>
        </div>
    </div>

    <script>
        const WORDLIST = [
            'apple','arrow','badge','beach','blade','bloom','board','brave','brick','brook',
            'cabin','cargo','cedar','chain','charm','chase','chief','claim','cliff','cloud',
            'coast','coral','crane','crown','curve','dance','delta','drift','eagle','ember',
            'fable','fault','flame','flock','forge','frost','gauge','ghost','gleam','globe',
            'grace','grain','grape','grasp','grove','guard','guide','haven','heart','hinge',
            'honey','horse','house','ivory','jewel','joint','juice','kayak','knack','lance',
            'latch','layer','leapt','light','liner','lodge','lunar','magic','manor','maple',
            'march','marsh','mason','medal','mercy','mirth','moose','mount','noble','north',
            'novel','ocean','orbit','otter','panel','patch','pearl','phase','pilot','pixel',
            'plain','plank','plaza','plume','point','polar','power','prism','prose','pulse',
            'quake','queen','quest','quiet','quote','radar','raise','range','rapid','raven',
            'realm','ridge','river','robin','royal','saint','scale','scene','scout','shade',
            'shape','shark','shell','shelf','shine','shore','sigma','slate','slope','smoke',
            'solar','south','spark','spear','spoke','spore','spray','stair','stake','stamp',
            'steam','steel','stern','stock','stone','storm','stove','sugar','swamp','swift',
            'table','thorn','tiger','token','torch','tower','trace','trade','trail','trend',
            'tribe','trout','trunk','tulip','ultra','unity','urban','valet','valve','vapor',
            'vault','vigor','viola','vivid','voice','wagon','watch','water','whale','wheat',
            'whole','widen','wings','wired','witch','world','worth','wound','yacht','yield',
            'youth','zebra','abbey','acorn','adept','agent','album','alert','alien','align',
            'amber','angel','angle','anvil','apart','aroma','atlas','audio','avian','basic',
            'basin','batch','berry','birch','birth','black','blank','blaze','blend','bless',
            'bliss','blood','blown','bonus','bound','brain','brand','bread','break','breed',
            'brief','bring','broad','broke','brush','budge','build','bunch','burst','buyer',
            'candy','cargo','carol','carry','catch','cause','chair','chalk','champ','chaos',
            'chart','check','chess','child','china','chunk','cider','cinch','civil','clash',
            'class','clean','clear','climb','cling','clock','close','cloth','coach','color',
            'comet','comic','coral','count','court','cover','craft','crash','crazy','cream',
            'creek','crest','crisp','cross','crush','cycle','dairy','daisy','dealt','decay'
        ];

        function secureRandom(max) {
            const array = new Uint32Array(1);
            crypto.getRandomValues(array);
            return array[0] % max;
        }

        function shuffleArray(arr) {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = secureRandom(i + 1);
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }

        function generateRandom() {
            const length = parseInt(document.getElementById('random-length').value);
            const useNumbers = document.getElementById('toggle-numbers').checked;
            const useSymbols = document.getElementById('toggle-symbols').checked;

            const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';

            let chars = letters;
            if (useNumbers) chars += numbers;
            if (useSymbols) chars += symbols;

            let result = [];

            // Ensure at least one of each selected type
            result.push(letters[secureRandom(letters.length)]);
            if (useNumbers) result.push(numbers[secureRandom(numbers.length)]);
            if (useSymbols) result.push(symbols[secureRandom(symbols.length)]);

            while (result.length < length) {
                result.push(chars[secureRandom(chars.length)]);
            }

            result = shuffleArray(result);
            return result.join('');
        }

        function generateMemorable() {
            const wordCount = parseInt(document.getElementById('memorable-words').value);
            const separator = document.getElementById('memorable-separator').value;
            const capitalize = document.getElementById('toggle-capitalize').checked;
            const addNumbers = document.getElementById('toggle-memorable-numbers').checked;

            const words = [];
            const used = new Set();
            while (words.length < wordCount) {
                const idx = secureRandom(WORDLIST.length);
                if (!used.has(idx)) {
                    used.add(idx);
                    let word = WORDLIST[idx];
                    if (capitalize) word = word[0].toUpperCase() + word.slice(1);
                    words.push(word);
                }
            }

            let result = words.join(separator);
            if (addNumbers) result += secureRandom(900) + 100;
            return result;
        }

        function generatePIN() {
            const length = parseInt(document.getElementById('pin-length').value);
            let pin = '';
            for (let i = 0; i < length; i++) {
                pin += secureRandom(10).toString();
            }
            return pin;
        }

        function getActiveType() {
            return document.querySelector('.tab.active').dataset.type;
        }

        function generatePassword() {
            const type = getActiveType();
            switch (type) {
                case 'random': return generateRandom();
                case 'memorable': return generateMemorable();
                case 'pin': return generatePIN();
            }
        }

        function renderPassword(password) {
            const display = document.getElementById('password-display');
            const type = getActiveType();
            display.innerHTML = '';

            if (type === 'memorable') {
                const sep = document.getElementById('memorable-separator').value;
                const parts = password.split(sep);
                parts.forEach((part, i) => {
                    if (i > 0) {
                        const span = document.createElement('span');
                        span.className = 'char-separator';
                        span.textContent = sep;
                        display.appendChild(span);
                    }
                    const span = document.createElement('span');
                    span.className = 'char-word';
                    span.textContent = part;
                    display.appendChild(span);
                });
            } else {
                for (const ch of password) {
                    const span = document.createElement('span');
                    if (/[0-9]/.test(ch)) span.className = 'char-number';
                    else if (/[a-zA-Z]/.test(ch)) span.className = 'char-letter';
                    else span.className = 'char-symbol';
                    span.textContent = ch;
                    display.appendChild(span);
                }
            }
        }

        function refresh() {
            const pw = generatePassword();
            renderPassword(pw);
            // Reset copy button
            const btn = document.getElementById('btn-copy');
            btn.textContent = 'Copy password';
            btn.classList.remove('copied');
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.options-panel').forEach(p => p.classList.remove('active'));
                document.getElementById('options-' + tab.dataset.type).classList.add('active');
                refresh();
            });
        });

        // Sync slider <-> number input pairs
        function syncPair(sliderId, numId) {
            const slider = document.getElementById(sliderId);
            const num = document.getElementById(numId);
            slider.addEventListener('input', () => { num.value = slider.value; refresh(); });
            num.addEventListener('input', () => {
                let v = parseInt(num.value);
                if (isNaN(v)) return;
                v = Math.max(parseInt(slider.min), Math.min(parseInt(slider.max), v));
                slider.value = v;
                num.value = v;
                refresh();
            });
        }

        syncPair('random-length', 'random-length-num');
        syncPair('memorable-words', 'memorable-words-num');
        syncPair('pin-length', 'pin-length-num');

        // Toggle and select changes
        document.querySelectorAll('.toggle input, select').forEach(el => {
            el.addEventListener('change', refresh);
        });

        // Copy button
        document.getElementById('btn-copy').addEventListener('click', async () => {
            const text = document.getElementById('password-display').textContent;
            try {
                await navigator.clipboard.writeText(text);
                const btn = document.getElementById('btn-copy');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy password';
                    btn.classList.remove('copied');
                }, 2000);
            } catch {
                // Fallback
                const ta = document.createElement('textarea');
                ta.value = text;
                document.body.appendChild(ta);
                ta.select();
                document.execCommand('copy');
                document.body.removeChild(ta);
                const btn = document.getElementById('btn-copy');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy password';
                    btn.classList.remove('copied');
                }, 2000);
            }
        });

        // Refresh button
        document.getElementById('btn-refresh').addEventListener('click', refresh);

        // Initial generation
        refresh();
    </script>
</body>
</html>
